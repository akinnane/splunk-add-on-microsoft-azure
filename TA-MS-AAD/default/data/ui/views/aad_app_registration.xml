<dashboard version="1.1">
  <label>Setup an Azure AD Application Registration</label>
  <description>Instructions for setting up an Azure AD Application Registration for use with REST inputs.</description>
  <row>
    <panel>
      <title>Step 1 - Create an Azure Active Directory Application Registration</title>
      <html>
        <ul>
          <li>Login to <a href="https://portal.azure.com/#blade/Microsoft_AAD_IAM/ActiveDirectoryMenuBlade/RegisteredApps" target="_blank">https://portal.azure.com</a>
          </li>
          <li>
            Select <b>Azure Active Directory</b> > <b>App Registrations</b> > <b>New Registration</b>: <br />
            <img src="/static/app/TA-MS-AAD/img/1500px-Azure_Application_registration.png" width="750" height="422" />
          </li>
          <li>Enter a <b>name</b> for the Application Registration.</li>
          <li>Leave the <b>Application type</b> at the default value (Single tenant).</li>
          <li>
            Click the <b>Register</b> button.<br />
            <img src="/static/app/TA-MS-AAD/img/Azure_New_App_Registration.png" width="750" height="422" style="border: 1px solid #000" />
          </li>
          <li>
            In a separate location, note the <b>Application (client) ID</b> and the <b>Directory (tenant) ID</b> values. <br />
            <img src="/static/app/TA-MS-AAD/img/Azure_App_ID.png" style="border: 1px solid #000" width="750" />
          </li>
        </ul>
      </html>
    </panel>
  </row>
  <row>
    <panel>
      <title>Step 2 - Generate a Client Secret</title>
      <html>
        <ul>
          <li>Navigate to <b>Certificates &amp; secrets</b>, and click <b>New client secret</b>: <br />
          <img src="/static/app/TA-MS-AAD/img/1500px-Azure_certs_secrets.png" width="750" height="422" />
          </li>
          <li>Enter a name for the secret in the <b>Description</b> field, and select the <b>Never</b> radio button under the <b>Expires</b> field.</li>
          <li>Click <b>Add</b>.</li>
          <li>In a separate location, copy the value for the secret key from the clipboard as this is the only time it will display.</li>
        </ul>
      </html>
    </panel>
  </row>
  <row>
    <panel>
      <title>Step 3 - Grant the Application Registration access to the Subscription(s)</title>
      <html>
        <ul>
          <li>From the Azure Portal, navigate to <b>Subscriptions</b> and choose the subscription from which you want to ingest data. In this example, the Pay-As-You-Go subscription is selected: <br/>
          <img src="/static/app/TA-MS-AAD/img/1500px-Azure_subscriptions.png" width="750" height="422" />
          </li>
          <li>Click <b>Access control (IAM) > Add > Add role assignment</b>.</li>
          <li>From the Role dropdown menu, select the appropriate role. The <b>Reader</b> role is sufficient for most inputs.  The <b>Topology</b> inputs require the <b>Network contributor</b> role.</li>
          <li>In the <b>Assign Access</b> to field, leave the default value</li>
          <li>In the select field, type the name of the Application Registration you just created: <br />
          <img src="/static/app/TA-MS-AAD/img/1500px-Azure_role_reader.png" width="750" height="422" />
          </li>
          <li>Click <b>Save</b>.</li>
          <li>If you have multiple subscriptions, you can continue to add access to each of the subscriptions you want to include.</li>
        </ul>
      </html>
    </panel>
  </row>
</dashboard>