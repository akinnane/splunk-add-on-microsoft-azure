<dashboard version="1.1">
  <label>Setup Overview</label>
  <row>
    <panel>
      <title>What's New?</title>
      <html>
        <p>
          <ul>
            <li>The Event Hub input has been removed from this add-on.  To ingest Event Hub data, use the <a href="https://splunkbase.splunk.com/app/3110/" target="_blank" class="external">Splunk Add-on for Microsoft Cloud Services</a></li>
            <ul>
              <li><a href="https://github.com/splunk/azure-functions-splunk/tree/master/event-hubs-hec" target="_balnk" class="external">Azure Functions</a> may also be used to ingest Event Hub data.  Azure Functions will push Event Hub data to Splunk via Splunk's HTTP Event Collector.</li>
            </ul>
            <li>Improvements in REST API session handling</li>
            <li>Added query parameters option to the Azure Active Directory Users input</li>
            <li>Added input name to all DEBUG logging statements</li>
          </ul>
        </p>
        <h2>Important note regarding Azure Active Directory Sign-In and Audit inputs</h2>
        <p>
          Due to <a href="https://docs.microsoft.com/en-us/graph/throttling#identity-and-access-service-limits" target="_blank" class="external">Microsoft throttling limits</a>, customers may receive <code>429 Too Many Requests</code> messages when using the Azure Active Directory Sign-In input and the Azure Active Directory Audit input. In these cases, data collection may lag or stop due to the throttling limits. It is recommended to send Azure Active Directory Sign-In and Audit data to an Event Hub and use the <a href="https://splunkbase.splunk.com/app/3110/" target="_blank" class="external">Splunk Add-on for Microsoft Cloud Services to ingest the data</a>.
        </p>
      </html>
    </panel>
  </row>
  <row>
    <panel>
      <title>Basic Input Setup</title>
      <html>
        <p>
          Most inputs require an Azure AD App Registration to authenticate to Azure. An Azure AD App Registration is similar to a username and password, except an Azure AD App Registration has a Client ID and Client Secret.
        </p>
        <p>
          <ul>
            <li>
              Instructions for creating an Azure AD App Registration and obtaining a Client ID and Client Secret can be found <a href="/app/TA-MS-AAD/aad_app_registration">here</a>.
            </li>
          </ul>
        </p>
        <p>
          The Azure AD App Registration must be granted the necessary permissions in order to retrieve the necessary data. Most inputs only require <b>Reader</b> access to the subscription; however, some inputs will require additional API permissions.  
        </p>
        <p>
          <ul>
            <li>
              Refer to <a href="http://bit.ly/Splunk_Azure_Permissions" class="external" target="_blank">this document</a> for specific permissions required for each input in this add-on and others.
            </li>
          </ul>
        </p>
        <p>
          After creating the Azure AD App Registration, enter the Client ID and Client Secret in the <a href="/app/TA-MS-AAD/configuration">Configuration</a> section of this add-on.
        </p>
      </html>
    </panel>
  </row>
  <row>
    <panel>
      <title>Troubleshooting</title>
      <html>
        <p>Several troubleshooting views have been included:
        <ul>
          <li>The <a href="/app/TA-MS-AAD/search?q=| inputlookup TA_Azure_checkpoint_lookup | eval key = _key" target="_blank"><b>View Checkpoints</b></a> view allows you to see the current checkpoint value for each input.  Inputs use checkpoints to page through data.  The checkpoint value may be a date/time, or a cursor string returned from an API.</li>
          <li>The <a href="/app/TA-MS-AAD/search?q=index=_internal sourcetype=ta:ms:aad:log DEBUG _Splunk_" target="_blank"><b>View Debug Logs</b></a> view shows debug events specific to the add-on inputs.  Ensure the add-on log level is set to <b>DEBUG</b> by navigating to <b>Configuration &gt; Logging &gt; Log level</b>.</li>
          <li>The <a href="/app/TA-MS-AAD/search?q=index=_internal sourcetype=ta:ms:aad:log ERROR _Splunk_" target="_blank"><b>View Error Logs</b></a> view will help troubleshoot errors.</li>
        </ul>
        </p>
        <p>
          Additional help can be found on <a href="https://answers.splunk.com/" target="_blank" class="external">Splunk Answers</a>.
        </p>
      </html>
    </panel>
  </row>
</dashboard>